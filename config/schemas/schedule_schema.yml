version: 1
name: schedule_schema
description: Canonical schema for normalized NFL schedules
fields:
  - name: season
    type: int
    required: true
  - name: season_type
    type: enum
    values: [preseason, regular, postseason]
    required: true
  - name: week
    type: int
    required: true
  - name: game_date_utc
    type: date
    required: true
  - name: game_time_utc
    type: time
    required: true
  - name: home_team
    type: string
    required: true
  - name: away_team
    type: string
    required: true
  - name: home_team_id
    type: string
    required: false
  - name: away_team_id
    type: string
    required: false
  - name: venue
    type: string
    required: false
  - name: venue_city
    type: string
    required: false
  - name: venue_state
    type: string
    required: false
  - name: game_status
    type: enum
    values: [scheduled, in_progress, final, postponed, canceled]
    required: true
  - name: source
    type: string
    required: true
  - name: source_event_id
    type: string
    required: true
  - name: canonical_game_id
    type: string
    required: false
  - name: canonical_hash
    type: string
    required: false
constraints:
  unique:
    - [season, season_type, week, home_team, away_team, game_date_utc, game_time_utc]
    - [canonical_game_id]
  non_null:
    - [season, season_type, week, game_date_utc, game_time_utc, home_team, away_team, source, source_event_id]
